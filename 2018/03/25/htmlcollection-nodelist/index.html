<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.4">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.4" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.0.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  
  <meta name="keywords" content="HTML,JavaScript,ES6," />


<meta name="description" content="Assuming the DOM is as described in the snippet below, my requirement is to get a javascript array of all the child nodes of container div. 123456&amp;lt;div id=”container”&amp;gt; &amp;lt;div class=&quot;divy&quot;&amp;gt;...">
<meta name="keywords" content="HTML,JavaScript,ES6">
<meta property="og:type" content="article">
<meta property="og:title" content="HTMLCollection, NodeList and array of objects">
<meta property="og:url" content="http://yoursite.com/2018/03/25/htmlcollection-nodelist/index.html">
<meta property="og:site_name" content="dpyzo0o ♡ dpyz0o0">
<meta property="og:description" content="Assuming the DOM is as described in the snippet below, my requirement is to get a javascript array of all the child nodes of container div. 123456&amp;lt;div id=”container”&amp;gt; &amp;lt;div class=&quot;divy&quot;&amp;gt;...">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-11-21T09:08:34.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HTMLCollection, NodeList and array of objects">
<meta name="twitter:description" content="Assuming the DOM is as described in the snippet below, my requirement is to get a javascript array of all the child nodes of container div. 123456&amp;lt;div id=”container”&amp;gt; &amp;lt;div class=&quot;divy&quot;&amp;gt;...">






  <link rel="canonical" href="http://yoursite.com/2018/03/25/htmlcollection-nodelist/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>
  <title>HTMLCollection, NodeList and array of objects | dpyzo0o ♡ dpyz0o0</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">dpyzo0o ♡ dpyz0o0</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
        </li>
      

      
    </ul>
  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/25/htmlcollection-nodelist/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dpyzo0o">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dpyzo0o ♡ dpyz0o0">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">HTMLCollection, NodeList and array of objects</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-25T20:34:49+08:00">2018-03-25</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/转载/" itemprop="url" rel="index"><span itemprop="name">转载</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <span class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">4.1k</span>
              

              

              
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Assuming the DOM is as described in the snippet below, my requirement is to get a javascript array of all the child nodes of <code>container</code> div.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">”container”</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divy"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divy"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divy"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divy"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>During the good jQuery days, you could just do <code>$(&#39;.divy&#39;)</code> or <code>$(&#39;#container&#39;).children()</code></p>
<p>I was trying to do the same thing using the native DOM selector API and was in for a surprise</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> childDivs = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.divy'</span>)</span><br><span class="line"><span class="built_in">Array</span>.isArray(childDivs) <span class="comment">//=&gt; false</span></span><br><span class="line">childDivs.constructor.name <span class="comment">//=&gt; NodeList</span></span><br></pre></td></tr></table></figure>
<p>Okay let’s try one of the <code>getElementBy%</code> methods and check what is returned</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> childDivsAgain = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'divy'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.isArray(childDivs) <span class="comment">//=&gt; false</span></span><br><span class="line">childDivs.constructor.name <span class="comment">//=&gt; HTMLCollection</span></span><br></pre></td></tr></table></figure>
<p>Now what are <code>NodeList</code> and <code>HTMLCollection</code> objects and why are we not getting the plain vanilla javascript array from these methods?</p>
<p>Let’s try to understand the difference between <code>HTMLCollection</code> and <code>NodeList</code> first.</p>
<blockquote>
<p>An HTMLCollection is a list of nodes. An individual node may be accessed by either ordinal index or the node’s name or id attributes. Collections in the HTML DOM are assumed to be live meaning that they are automatically updated when the underlying document is changed.</p>
</blockquote>
<p>HTML Collections are always “in the DOM”, whereas a NodeList is a more generic construct that may or may not be in the DOM.</p>
<blockquote>
<p>A NodeList object is a collection of nodes. The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live or static based on the interface used to retrieve them</p>
</blockquote>
<p>Let’s test the specification with relevant code to understand more</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> parentDiv = <span class="built_in">document</span>.getElementById(<span class="string">'container'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nodeListDivs = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.divy'</span>)</span><br><span class="line"><span class="keyword">let</span> htmlCollectionDivs = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'divy'</span>)</span><br><span class="line"></span><br><span class="line">nodeListDivs.length <span class="comment">//=&gt; 4</span></span><br><span class="line">htmlCollectionDivs.length <span class="comment">//=&gt; 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//append new child to container</span></span><br><span class="line"><span class="keyword">var</span> newDiv = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">newDiv.className = <span class="string">'divy'</span></span><br><span class="line">parentDiv.appendChild(newDiv)</span><br><span class="line"></span><br><span class="line">nodeListDivs.length <span class="comment">//=&gt; 4</span></span><br><span class="line">htmlCollectionDivs.length <span class="comment">//=&gt; 5</span></span><br></pre></td></tr></table></figure>
<p>We can see that the HTMLCollection is literally live, in the sense, any change to DOM is updated automatically and available in the collection.</p>
<p>Not all NodeList objects are static. For example, <code>document.getElementByName</code> will return a live NodeList.</p>
<p>But remember that neither <code>HTMLCollection</code> nor <code>NodeList</code> support the array prototype methods like <code>push</code> <code>pop</code> or <code>splice</code> methods . Iterator methods like <code>forEach</code> have been recently added though and latest browsers might support them.</p>
<p>I came to know about this difference, when I was trying to use the <a href="https://github.com/bevacqua/react-dragula" target="_blank" rel="noopener">dragula drag-n-drop</a> library to add selected components to the library</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> draggableLists = <span class="built_in">document</span>.querySelectorAll(<span class="string">'div.draggable'</span>)</span><br><span class="line">dragula(draggableLists); <span class="comment">//will not work</span></span><br></pre></td></tr></table></figure>
<p>This will not work as expected as the <code>dragula()</code> constructor expects a javascript array and we are passing a NodeList to it.</p>
<p>To convert the NodeList or HTMLCollection object to a javascript array, you can do one of the following:</p>
<p><strong>Use Array.from method</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nodelist = <span class="built_in">document</span>.querySelectorAll(‘.divy’)</span><br><span class="line"><span class="keyword">const</span> divyArray = <span class="built_in">Array</span>.from(nodelist)</span><br></pre></td></tr></table></figure>
<p><strong>Use Array.prototype.slice</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nodelist = <span class="built_in">document</span>.querySelectorAll(‘.divy’)</span><br><span class="line"><span class="keyword">const</span> divyArray = <span class="built_in">Array</span>.prototype.slice.call(nodelist)</span><br></pre></td></tr></table></figure>
<p><strong>ES6 way</strong></p>
<p>And I like this one. If you are using ES6, you can just use the spread operator</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> divyArray = […<span class="built_in">document</span>.querySelectorAll(‘.divy’)]</span><br></pre></td></tr></table></figure>
<p>Now, let’s apply that to the dragula api to make it work</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dragula([...document.querySelectorAll(<span class="string">'div.draggable'</span>)])</span><br></pre></td></tr></table></figure>
<p>So when do you really convert <code>NodeList</code> to an array? Well, it depends on your usecase. If you really want an iterator to the latest updated DOM at all times, you should use the <code>NodeList</code> or <code>HTMLCollection</code> as it is without converting it to an array.</p>
<p>本文转载自: <a href="https://hackernoon.com/htmlcollection-nodelist-and-array-of-objects-da42737181f9" target="_blank" rel="noopener">HTMLCollection, NodeList and array of objects</a></p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/HTML/" rel="tag"># HTML</a>
          
            <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          
            <a href="/tags/ES6/" rel="tag"># ES6</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/03/18/js-splice-slice/" rel="next" title="slice() 与 splice() 方法总结">
                <i class="fa fa-chevron-left"></i> slice() 与 splice() 方法总结
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/04/01/css-specificity/" rel="prev" title="Specifics on CSS Specificity">
                Specifics on CSS Specificity <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="dpyzo0o" />
            
              <p class="site-author-name" itemprop="name">dpyzo0o</p>
              <p class="site-description motion-element" itemprop="description">这个人很懒，什么也没留下</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">15</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/dpyzo0o" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/dpyzo0o" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dpyzo0o</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">站点总字数&#58;</span>
    
    <span title="站点总字数">27k</span>
  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &#45; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Mist</a></div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.4"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
